{"ast":null,"code":"/* See license.txt for terms of usage */\nvar _ = require('underscore');\n\nexports.get = function (url, params, cb) {\n  exports.send(url, 'GET', params, cb);\n};\n\nexports.post = function (url, params, cb) {\n  exports.send(url, 'POST', params, cb);\n};\n\nexports.send = function (url, method, params, cb) {\n  var xhr = new XMLHttpRequest();\n  xhr.open(method, url, true);\n\n  xhr.onreadystatechange = function () {\n    if (xhr.readyState == 4) {\n      var data = xhr.responseText;\n\n      try {\n        data = JSON.parse(data);\n      } catch (exc) {}\n\n      if (cb) {\n        cb(data);\n      }\n    }\n  };\n\n  var body;\n\n  if (params) {\n    var bodies = [];\n\n    for (var name in params) {\n      bodies.push(name + '=' + encodeURIComponent(params[name]));\n    }\n\n    body = bodies.join('&');\n\n    if (body.length) {\n      xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n    }\n  }\n\n  xhr.send(body);\n};\n\nexports.getJSON = function (url, params, cb) {\n  var pairs = ['callback=jsonp'];\n\n  _.each(params, function (value, key) {\n    pairs[pairs.length] = key + '=' + value;\n  });\n\n  if (pairs.length) {\n    url = url + (url.indexOf('?') == -1 ? '?' : '&') + pairs.join('&');\n  }\n\n  function jsonpReturn(o) {\n    self.jsonp = undefined;\n\n    if (!o || o.error) {\n      if (cb) cb(o);\n    } else {\n      if (cb) cb(0, o);\n    }\n  }\n\n  if (has('appjs')) {\n    self.jsonp = jsonpReturn;\n    appjs.load(url, 'GET', {}, params, function (err, data) {\n      if (err) {\n        cb(err);\n      } else {\n        sandboxEval(data);\n      }\n    });\n  } else if (self.document) {\n    self.jsonp = function (o) {\n      // Return on a timeout to ensure that getJSON calls return asynchronously. There\n      // is a case in IE where, after hitting the back button, this will return\n      // synchronously and potentially confuse some clients.\n      setTimeout(function () {\n        jsonpReturn(o);\n      }, 0);\n    };\n\n    function cleanup() {\n      if (script.parentNode) {\n        script.parentNode.removeChild(script);\n      }\n    }\n\n    var script = document.createElement('script');\n    script.type = 'text/javascript'; // script.async = true;\n\n    script.src = url;\n    script.onload = cleanup;\n\n    script.onerror = function (event) {\n      cleanup();\n      cb(\"Error\");\n    };\n\n    var head = document.getElementsByTagName(\"head\")[0];\n    head.appendChild(script);\n  } else {\n    self.jsonp = jsonpReturn;\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);\n\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState == 4) {\n        eval(xhr.responseText);\n        self.jsonp = null;\n      }\n    };\n\n    xhr.send(\"\");\n  }\n};\n\nexports.postJSON = function (url, params, cb) {\n  exports.post(url, params, function (data) {\n    var result = eval(data);\n    cb(0, result);\n  });\n};","map":{"version":3,"sources":["/Users/vsai23/Workspace/final_cop3530/node_modules/ajax/lib/ajax.js"],"names":["_","require","exports","get","url","params","cb","send","post","method","xhr","XMLHttpRequest","open","onreadystatechange","readyState","data","responseText","JSON","parse","exc","body","bodies","name","push","encodeURIComponent","join","length","setRequestHeader","getJSON","pairs","each","value","key","indexOf","jsonpReturn","o","self","jsonp","undefined","error","has","appjs","load","err","sandboxEval","document","setTimeout","cleanup","script","parentNode","removeChild","createElement","type","src","onload","onerror","event","head","getElementsByTagName","appendChild","eval","postJSON","result"],"mappings":"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","sourcesContent":["/* See license.txt for terms of usage */\n\nvar _ = require('underscore');\n\nexports.get = function(url, params, cb) {\n    exports.send(url, 'GET', params, cb);\n}\n\nexports.post = function(url, params, cb) {\n    exports.send(url, 'POST', params, cb);\n}\n\nexports.send = function(url, method, params, cb) {\n    var xhr = new XMLHttpRequest();\n    xhr.open(method, url, true);\n    xhr.onreadystatechange = function() {\n        if (xhr.readyState == 4) {\n            var data = xhr.responseText;\n            try {\n                data = JSON.parse(data);\n            } catch (exc) {\n            }\n            if (cb) {\n                cb(data);\n            }\n        }\n    }\n\n    var body;\n    if (params) {\n        var bodies = [];\n        for (var name in params) {\n            bodies.push(name + '=' + encodeURIComponent(params[name]));\n        }\n\n        body = bodies.join('&');\n        if (body.length) {\n            xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\"); \n        }        \n    }\n\n    xhr.send(body);\n}\n\nexports.getJSON = function(url, params, cb) {\n   var pairs = ['callback=jsonp'];\n    _.each(params, function(value, key) {\n        pairs[pairs.length] = key+'='+value;\n    });\n    if (pairs.length) {\n        url = url + (url.indexOf('?') == -1 ? '?' : '&') + pairs.join('&');\n    }\n\n    function jsonpReturn(o) {\n        self.jsonp = undefined;\n        if (!o || o.error) {\n            if (cb) cb(o);        \n        } else {\n            if (cb) cb(0, o);\n        }        \n    }\n\n    if (has('appjs')) {\n        self.jsonp = jsonpReturn;\n\n        appjs.load(url, 'GET', {}, params, function(err, data) {\n            if (err) {\n                cb(err);            \n            } else {\n                sandboxEval(data);\n            }\n        });\n    } else if (self.document) {\n        self.jsonp = function(o) {\n            // Return on a timeout to ensure that getJSON calls return asynchronously. There\n            // is a case in IE where, after hitting the back button, this will return\n            // synchronously and potentially confuse some clients.\n            setTimeout(function() { jsonpReturn(o) }, 0);\n        }\n\n        function cleanup() {\n            if (script.parentNode) {\n                script.parentNode.removeChild(script);\n            }            \n        }\n\n        var script = document.createElement('script');\n        script.type = 'text/javascript';\n        // script.async = true;\n        script.src = url;\n        script.onload = cleanup;\n        script.onerror = function(event) {\n            cleanup();\n            cb(\"Error\");\n        };\n        var head = document.getElementsByTagName(\"head\")[0];\n        head.appendChild(script);\n    } else {\n        self.jsonp = jsonpReturn;\n\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', url, true);\n        xhr.onreadystatechange = function() {\n            if (xhr.readyState == 4) {\n                eval(xhr.responseText);\n                self.jsonp = null;\n            }\n        }\n        xhr.send(\"\");\n    }\n}\n\nexports.postJSON = function(url, params, cb) {\n    exports.post(url, params, function(data) {\n        var result = eval(data);\n        cb(0, result);\n    }); \n};\n"]},"metadata":{},"sourceType":"script"}